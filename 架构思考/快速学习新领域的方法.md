# 快速学习新领域的方法


# 方法形成历程

在介绍方法之前，介绍一下我总结出这些方法的历程。

从2009年我初次接触风控，到2014年大概5年左右的时间，我对这个系统断断续续重构了大概7~8次，
重构的起因有些是因为个人原因，有些是因为市场和公司原因，有些是因为技术的发展和视野的开阔

比如觉得一套系统既有异步也有同步太丑，非要设计成一套解决方案；
事前、事中、事后有三套代码不够优雅，也要设计成一套。

比如从C到Java的改进，设计标准领域模型+XML映射客户化模型来提升产品化、提升客户化实施速度。
设计流计算组件来来解决1%的SQL交易了80%的资源的问题。引入EL抛弃标准模型来解决耦合特定领域
来支持通用性

比如引入Dubbo支持分布式、实现流计算组件支持高性能计算等；后面又解耦Dubbo，解耦流计算……技术组件以
实现对springboot，dubbo，……spark，storm……的任意基础设施、组件的插件化支持

    架构哲学1：有所得必有所失，得多失多；虽然未必全失必全得，然必然全得必全失。

到14年左右的时候，这个原来C语言设计的大小几百M的软件已经被我改造成了以为核心只有几K的微内核架构。
可以快速适配任意基础设施、组件、行业领域、任意形态的规则……

而这个过程中总结的很多经验、原则我感觉不仅仅适用于风控，也适用于任何业务领域的。我特别想验证这一点
。后面几年，我从一个公司蹦跶到另外一个公司、一个行业蹦跶到另外一个行业。希望能验证这个架构方法论。

这几年经验下来，最大的经验是：在任何完美的架构之前首要问题是如何获取领域知识、沉淀领域模型。并且形成
了比较系统的方法。

我没有看到任何架构方面对如何学习领域知识的总结

    一线业务人员提供的业务细节太多了、看不到全貌
    没有人敢断定任何给出的设计是领域性的，足以支持未来的架构发展

vens在著名的《DDD》一书 中对领域学习的具体方法也仅仅是蜻蜓点水，看不到任何工程系统中可以落地
的痕迹；至于很多卖培训的那都是太极高手 问到关键问题总有远比技术高10倍的口才给你滑过去，技术上翻来覆去讲的都是
百度上烂大街的。

我只能在实践中摸索。

在我实践的第一家公司，我负责整体业务SOA架构规划。我头几个月都是懵的，公司业务变化太快、一会online，
一会offline，一会o2o……看一个局部已经头晕，了解整体感觉怕是遥遥无期…………一次会上正在昏昏欲睡感觉头要磕到
桌子了，突然脑灵光一现清醒了，SOA架构规划瞬间浮现在我脑海里了————它既能覆盖公司过去的业务、看起来也能覆盖
未来公司很久的业务发展、而且也符合我们之前约定的既不多也不少（不单体、但也不微服务）的原则

在我实践的第二家公司，我负责的风控一个月就搞定了，可是我最感兴趣的是我不负责但公司规划中最重要的大资管项目
——公司最早是做P2P贷款，后来又开了很多事业部负责不同的业务，每个业务有自己的技术部门。每个技术部分的业务看起来
都非常类似：资产端：卖东西、贷款；资金端：授信融资；中间业务端：根据不同的资金和资产要求做撮合，比如ABS类不
能做消费业务；直投不能自营……我经常找业务部门的产品经理聊。如果我问：你们资金业务到底多少种模式？她能123的跟我
讲ABS等，各种政策法规……我听得头晕，但如果我直接问：它们有什么规律、模式模型么？她们一脸懵逼……直到有一天我在产品经理
得SVN上看到了几张流程图，我瞬间悟了————不是这几个流程图涵盖了一切，而是不论他们是什么模式、业务业务差异，他们总
归是能用几个节点一组流程编排出来。

这两次虽然也设计出了领域模型，可是过程让我感觉自己是在瞎蒙，耗时都蛮久的。可是我也注意到：第二次比第一次快个把月。



有一天我在看《数学：确定性的丧失》这本书的时候，想到了物理学上的决定论和不确定性对战。那么决定一个信息系统的架构的回事什么呢？

    架构哲学2：信息决定架构
        软件架构是是一个树状结构、任何一个枝叶分叉都一定对应根部一个营养管道。不可能有例外。
        在领域驱动中，这叫做聚合根，是个数据结构，其数据的每一种变化决定了软件的逻辑分叉。掌握了这个对象就掌握了软件架构
        无需通过阅读每一行代码去理解整个软件架构，
        也无需通过理解每一个业务需求去理解软件架构

    例如一个支付系统的订单对象其值分布可能是这样的。
    pay_trade_order
    卖家：mall_id;ID
    卖家类型：普通小商家，VIP付费小商家，大客户、VIP付费大客户.....:枚举值对象
    买家ID：user_id:ID
    买家类型：穷鬼/VIP/有钱人/有钱人且舍得花钱的VIP。。。。。。:枚举值对象
    支付金额：amount：数据类型
    支付渠道：alipay，weixinPay，abc，psbc，.....：枚举值对象

 





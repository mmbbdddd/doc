

## 架构设计的基本原则

* 信息决定架构
* 优先确定架构空间，而不是具体架构能力
* 架构分层
* 最小实体原则
* 提供确定性，客服副作用
* 单向依赖
* 复杂度分离
* 架构设计目标：控制复杂性，提供最大确定性和可能性空间
* 解决动力来源问题

https://zhuanlan.zhihu.com/p/712609502

这里补充一下最关键的动力来源问题


        路线定了，干部就是个关键问题          ————————毛选



****


    大到社会，小到公司，任何变革，无论是伟大的，还是肮脏的，必然是有人发动的；必然是相当一批人有强烈的动机，才能推动相当大的变革。
    而任何管理者、如果追求稳定性，就必然将他们分割层彼此利益关联、耦合、冲突的小群体。
    使得任何一个群体，无法单独形成真正系统性的影响。
    汉的分封体系、魏晋的门第、宋的枢密院、明的锦衣卫、满汉体制、土耳其和罗马的雇佣兵
    如果追求伟大的管理者、会用有诱惑力的利益来驱动他们，捏合成一个彼此促进和督促的整体。
    秦的耕战、南北朝的柱国、辽的猛安谋克、蒙古的怯薛、清的八旗……


    
    然而，每个时代，都有自己的新问题。不看题抄作业不会有任何效果。
    
    30年代，我们抄苏联的作业，以工人阶级为主，搞城市暴动；大家都知道错了，需要发动更广大的农民来才适合中国。今天，我们搞数字化，搞架构改革，应该怎么做呢？
    
    A，依赖开发团队
    B，依赖更广大的公司职员团队
    C，依赖少数产品、架构师团队
    D，依赖管理管团队
    
    在大多数公司，是选D。而并不会选ABC。即使是D，也不一定靠得住，往往任人唯亲。
    这是平庸的管理者的做法。 
    在这样的公司中，利益往往来自于一两个核心人员（基本就是老板自己），大多数人都是牛马。
    如果这个人并不是自己，老板很焦虑（@俞敏洪@小孙）
    如果这个人是自己，老板的焦虑来自于如何让牛马们承担最多的工作量，自己掌握最多的收益；而他们又不会对自己产生威胁。————而底层也并不能笨到影响到公司运营。
    永远处于这两个焦虑的选择之中。

    在少数的公司，会选择ABCD。
    管理者有足够大的格局、有足够大的利益诱惑，有足够强的手段，能够将所有人捏合成为一个整体、能够让所有人克服目标，能够形成正向的利益循环。
    
 

**这个捏合所有人，形成一个清晰目标的过程，就是路线问题。**

**这个教育关键角色，团结所有人，掌握客服目标过程中的困难的过程，就是干部问题。**

 

    大多数的管理者，只所以只能是普通管理这，第一个是梦想和格局不够大，第二个是没有足够的方法论。 第三个是没有办法获得足够的利益。
    其中最关键的，并不是格局；而是能力问题。所以必须假手于人，然后再对能臣的猜疑链中。

    次等的，即使伟大如DXP，只能算是0.5个能力，被批曰：
            只懂得粗暴的考核干部，不知道如何教育干部。
            干部不管黑猫白猫，弄好了GDP，却腐化或者鱼肉百姓引起民怨之时，他就杀了他们平民愤。
            如果没有民愤，他也不管；
            罚而不教，暴也。是管理者本身的无能。
            看着他们犯错误，却不能方位杜渐，本质就是谋杀
            和郑伯克段本质上有什么区别呢？是坏呢？还是蠢呢？
            他最先应该责怪的，是自己。

    毛眼光上确实是非常超人的，在遵义会议之前，几乎所有的问题，几乎都是绝大多数人反对 
            
            举个例子
            农民并不是那么容易发动起来斗地主的。他们并不是那么容易被鼓动的SB。
            他们质疑：
                    1，地是地主的，我种地主的地；给人家地租，天经地义。
                    2，很多人穷，是有原因的；或者好吃懒做，村里的二流子；或者家风不正，媳妇、婆婆、个人……大手大脚攒不下钱
                    3，富人大多数其实有相当的特长和才能、要么是省吃俭用、要么很有管理手段；而才能不号的，往往几代以后就破落下来
            红军忽悠他们富人剥削他们的理论他们其实不太认同的。

            很多农民对于红军当时摸进村子，枪毙地主富户，首先发动流氓地痞抢他们的财产，进而带动普通农民斗地主的做法是疑问很大的。

            
            毛其实应该是第一个意识到这里关键矛盾的人。
            1，地主和农民本质上是一体的，
                无所谓地主和农民的区分。农民翻身了做了地主，和地主破落了成了农民；他们的本质秉性不可能有任何改变
                不可能破落农民就善良，富裕地主就邪恶。
                这和后来的文化大革命思想一脉相承。
            2，所以，以上方法本质是斗争策略问题。
                所以，中国的革命要分三个阶段
                民主主义革命：通过土改等手段，发动农民斗地主；目的是利用最广大的的群众力量技术上完成掌权。在社会制度上完成无产阶级掌权。
                新民主主义革命：没收农民土地，资本家工厂……；消除他们的剥削和资本属性；从技术上让他们无法转变为自身的对立面。
                社会主义革命：……
            3，如果2的政治策略执行没有问题。
                结合毛的政治军事微操能力。
                    从宏观上行能敏锐抓住国际局势稍纵即逝的时机，抓住仅有的三年时间窗口发动解放战争。（美苏刚刚经历2战，对战争的残酷深有体验，不愿意
                    轻易发动战争；以及美苏对战后如何看待中国有分期；对于应该分裂成两个国家，如朝鲜一个分裂各自扶持；对于各自的利益划分有如何解决没有
                    达成共识；对于中国内部国民党/共产党的态度也比较摩棱不清————美国当时对国民党很失望，对共产党有一定的好感；斯大林对独立自主的共产
                    仓比较排斥，当对于共产党当政而不是国民党当政也有期待）
                    微观，具备战术战略落实到普通战士、游击战、运动中……得心应手；滑不溜手又硬的扎手。
                    后面无论是美苏古巴危机短短1个月出手教育印度。
                    无论是战前的决策，还是战后的撤退和政治战。
                    军事、政治操作都堪称完美。
                胜利只是迟早问题。

            
我们这里并不是鼓吹毛，批判邓，而是希望还原当时的历史背景。学习到一定的方法论，解决我们今天的问题。

    毛的一生，无论是早期井冈山时期，还是抗日战争，还是解放战争、朝鲜战争、乃至后来的国际博弈中。
        其境况就是在非常复杂的局面中，他只具备极小的资源，却要解决极大的困难和问题。
        他的解决方案也并不是靠个人的勇武、赌博式的革命和暗杀。
        而是欧几里得式的，仅仅依赖几个基本规律作为武器就能必然解决无论多么复杂的问题。
        
    核心的要义毛说的很清楚：清晰的、分析问题，分析矛盾，分清主次；用聪明而正确的方法，逐次逐个击破；如果没有效果，改进策略。
        每一次成功都让我们更强大，每一次失败，都让我们更聪明，更明确。
        无论是军事上，
        无论是政治上
        无论是社会制度改革上
    ......
    在任何时候，他都能在极致的复杂中，抓住最关键的矛盾，找到最准确的实际，用最合适的方法完成。
 
 

在软件的架构中

    复杂性在业务的不断变化、在技术的不断变化、在组织结构甚至领导个人关系的各种耦合和掣肘之中。
        
    架构师同样需要做出这样的决策
    1，让自己面临最小的矛盾
    2，让自己拥有最大的的可能性和灵活性
    3，为公司、团队带来最大的利益；能不断的滚雪球

    不谈上面这些虚的。比较实际的做法是  传统的技术架构师，必须做出以下进化
    1，从技术组件的迷恋中解脱出来，能够聚焦业务主要矛盾
    2，能够快速学习离散的业务细节，从中抽离出关键的交易角色、交易结构、交易流程，落地为领域架构
    3，领域架构MVP版本快速实现，最小技术熵
    4，MVP版本快速适配各种技术底座、业务变化（六边形架构），最小化技术、业务阻力、最大化通用性、快速形成战斗力
    5，知识分享、团队协作和影响能力、扩大良性循环雪球和团队
    当然，如果是产品，项目经理具备了这样的业务学习、抽象、技术落地能力、效果是一样的。

最关键的，如毛的路线问题和干部问题一样，必须在实践中，和团队一起去解决，一起去成长。用好的方法影响人，教育人， 成就人。






## 架构师和业务专家通过什么样的工作模式可以产生领域模型
    
    1，聚焦客户，聚焦交易角色
    2，聚焦流程，聚焦交易结构
    3，聚焦能力，聚焦业务词典
    
    在这三个方面，他们可以在个人利益和公司利益之间，得到极大的一致。
    在这三个方面，他们可以在沟通内容上达成最大的一致，而避免陷入专业细节无止境学习和争论之中。
    
    在沟通的主导权中，架构师必须掌握话题的主导权
    1，明确公司战略
    2，快速梳理客户，宏观业务流程，交易结构
    3，快速明确业务流程中关键利益、能力和和未来规划
    4，基于流程，梳理现有关键业务能力甚至业务细节、论证宏观架构的完备性、可落地性
  
    
    为什么是他主导
    
    1，后续他必须在MVP版本中，将理解和规划落地
    2，后续架构师指导子系统落地时候，
        他也必须遵循落地工程师提供设计方案，而不是自己大包大揽。
        他需要掌控的是技术落地中的业务方向和能力建设把控的上。 
        ————产品经理理论上也可以做（已经做了10多年了），但产品经理只能把控业务方向（传递需求），无法掌控实际落地架构和质量。

    再次强调
    1，业务导向思想
    2，以流程为纲学习业务，抽象业务，论证业务、掌控业务
    3，MVP快速实现能力 
    4，对子系统工程落地的架构掌控和鉴别能力
    
    
        
## 我对复杂系统的理解

    复杂系统可能在21世界是比较关键的科学突破
    
    说几个点
    1，物理学陷入停滞，大概70+年了。没有突破性的进展。基础理论简化到了2个，但是互相矛盾，不能统一。
    2，数学陷入停止，大概100+年了。确切的说不是停止，基本哲学信念被证明错误了
            《数学：确定性的丧失》描述了上个世纪数学公理化运动的突飞猛进。似乎和物理学一样统一指日可待。以及本世纪的崩溃和迷茫。
            罗素悖论、贝尔不等式……等科学发展证明了完备性和自洽性不能兼得。
            而过去几千年的科学就是：科学是精密的、准确的。
            近代100年，物理学和数学的最新发展都否定了这一点，都在说—————科学的确定性哲学不存在了。
            那么，剩下的，都是无止境的、意义不大的小修小补么？
    3，数学理论层面最顶级的抽象范畴学已经已经接近于哲学层面了：研究概念，概念的结构，关系，关系的结构……
    4，系统论的基本研究对象是：实体、关系、变化、结构、层次
            譬如其子科学控制论是研究给系统一个输入信息，控制他的变化和行为。
            信息论：研究信息本身和对象之间的关系——增加确定性，降低熵；以及信息通道和信息之间的基本原则。
            ……
    5，最新的复杂科学特别让人痴迷和迷惑的是涌现。这似乎和人类为什么产生智能有关。
            比如人类造出了alphago，GPT这种级别的智能， aplpago会下出人类几千年历史上完全无法理解的风格；
            而科学家和工程师对于CPT为什么在参数复杂到一定程度上突然产生类似甚至超越人类的智能知之甚少。
            OPENAI首席科学家担心奇点问题（maybe），甚至对CEO发动了“政变”。这不能阴谋化————说明至少在OPENAI内部，有相当部分的人
            他们对自己的工作产物是震惊甚至不能理解的。
 
            正如人类虽然有智能，但是完全不理解自己的能力怎么产生的、如何运作的一样。

            从物质和能量守恒定律出发，我是根本不相信涌现和智能这种玩意的。我更偏向于机械化的理解————人就是一台更精密的仪器————它的本质和现在的
            人工智能一样，就是海量数据训练和筛选出来的，一个针对特定信息输入，收敛效率更高的信息处理系统。————这意味着它能更快、更准确做出正确的
            决策，在大自然的AB实验中，获得更大的生存几率。

            涌现的一种解释是它产生了从来没有产生过的东西：比如智能或者智慧。
            我认为不是。
            我认为智能的本质就是更快、更准确的信息判断，更高的生存概率。
            这从世界之间有分别，有竞争，就开始了。
            人类相比动物，“聪明”是数量级的差异。但并不是本质不一样。
            动物相比细胞，“聪明”是数量级的差异。也并不是本质不一样。
            本质就是信息处理函数效率和准确性的问题。

      6，软件架构上，70年前人月神话认为本质是：概念、关系、变化、不确定性……

      7，巧的时候，这和数学范畴学、系统论、以及最近大火（诺奖）的复杂科学基本原理似乎异曲同工。

      8，复杂科学和生命科学和DDD对我的软件架构观念最大的冲击是

            8.1  简单无法产生复杂，而只有复杂可以产生真正的复杂。
                  无机物的堆叠无法产生有机物。
                  元核核细胞的堆列无法产生复杂生命，只有真核细胞才可以。
                  这其实意味着UNIX设计哲学那套极端强调简单的设计，无法真正解决复杂软件设计。
                  能解决真正复杂软件的，其基本构造一定是入真核细胞那样的东西，简单而并不简单。
            8.2 很多极致的复杂性，本质极致简单的表达
                  人虽然极致复杂，可以用一个细胞克隆出来另外一个。智商等各方面没有本质差异。
                  某种程度上，它复杂度 = 一个细胞 = 23组数字序列。
                  真核细胞某种程度上，是高度复杂度的极度浓缩，使得同一种复杂度本质，在各种维度上具有最大的生存概率。     
            8.3  在DDD架构中，软件模型对应的是真核细胞这个角色
                  实体：信息的抽象，外部交互数据
                  实体服务：内部处理能力的抽象。在真核细胞中，代表着吞噬蓝藻的本体原核细胞。
                  聚合：实体对值对象的引用、控制和选择机制
                  值对象：外部或者内部能力的抽象。在真核细胞中，对应着吞噬进来的蓝藻，红藻。
                  聚合根：DNA。代表了吞噬后自身选择留下的DNA（体系）和被吞噬者的关键DNA（造能）

            在真核细胞中，DNA是经历了世界的无穷尽的选择后留下的“确定性”的抽象
            在软件架构中，领域是业务的抽象，聚合根是领域的抽象。
            有经验的架构师，可以基于聚合根的数据结构，掌控整个领域的软件架构。
            正如科学家可以基于一个人的DNA，复制出一个人一样。


        题外话
            曾经，哲学家认为人类没有办法真正理解世界。
            缸中大脑
            庄周梦蝶
            哲学上会让认识这个问题变得绝对不可能。

            芝诺这种喷子，喷的当时的科学派和理性派没有任何办法。
        
            这个时候，康德出现了，他提出了“先天理性”————人既然存在，是自然理性的结果；其存在的内在和自身，具备先天理性
            ————自然掌握了一定程度上理解大自然，和大自然琴瑟相和的认知能力。

            当然，今天，自然哲学的信念虽然又崩溃了。我想，也许明天科学的发展，会让人类在另外一个维度上重新提升自己认知。

        9，系统的层次
            
            复杂系统，是分层的。
            每一层处理特定的问题，呈现特定的特性。
            在生命上：大脑/智慧、身体/器官、底层细胞
            
            在软件上，接口层（信息层），业务处理层（信息处理），技术支撑层。

            在物理科学上，宏观（相对论），微观（量子力学）

            物理学和生命科学我不敢妄言，至少在软件架构上，即使分为很多层，每一层的基本设计哲学是完全一致的。
            结构上，都必然是：数据输入、流程处理、组件组织。差异是每一层关注的是特定的问题域。
            但并不会因为问题领域的不同，规律上有什么本质的矛盾。代码的写法上，有什么必然的矛盾。
            即使是在底层操作系统层面，或者使用汇编或者机器码层面，乃至特定的场景对性能或者可靠性有机制的要求，也不会有本质的差异。
            依然是信息的传递，信息的处理、处理能力能复用就复用（关键是隔离和筛选机制）。尽量不发明轮子（和真核细胞复用蓝藻造能，抛弃自己内在造能机制差不多）

            操作系统发展到操作系统L4代，——基本已经明确微内核操作系统简化到极致就是传递信息。
            https://link.zhihu.com/?target=https%3A//www.itpub.net/2019/07/19/2461/
![img.png](img.png)

当然，即使只是传递信息，依然有很多问题需要思考和解决  

    传递给谁？
    如何知道传递给谁？
    这谁或者如何是否耦合和绑定？
    如何能设计更简单，更健壮灵活的架构？
    改如何解决如上问题呢？

https://zhuanlan.zhihu.com/p/712609502
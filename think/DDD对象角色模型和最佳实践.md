
# DDD战略设计

DDD战略设计解决的问题是“如何从业务知识中提炼出领域模型”

要解决这个问题，必须首先解决如下两个问题

    业务模型长啥样？
    如何梳理？

第一个问题是方向性问题，不明确它，可能存在如下问题

    1，技术架构认为领域设计的内容是技术组件，是Pass、是组件、是中间件……等技术
    2，业务专家认为领域设计的内容需求1，需求2，需求3……中各种具体业务活动……
    3，他们彼此争论、或者妥协、最终给出一个大杂烩或者四不像，达不到领域模型的要求。

领域模型有什么要求？我的总结是最好满足”三0三不“，即

    领域模型熵 = 业务熵接近于0 + 技术熵等于0 + 工程熵等于0 
    领域模型耦合 = 不耦合特定的业务 + 不耦合特定的技术 + 不耦合特定的组织架构

这个要求看起来很好，但是对具体业务设计并没有 帮助。还是不知道如何做。

## 领域模型画像

 三0三不看起来不错，但是它只是回答了领域架构不应该如何，没有回答它具体张什么样子：

正面描述领域模型它包含三个要素 
    
    1，拓扑顶点：领域角色抽象
    2，拓扑形状：流程抽象
    3，数据要素：数据抽象 

    在业务系统中，也往往称为交易架构



## 梳理方法

    1，通过梳理业务流程来抽象基本的领域结构骨架。
    2，通过事件风暴来完善交易结构，形成领域模型
        2.1 头脑风暴交易角色的抽象和扩展（客户群扩展）
        2.2 头脑风暴交易流程的抽象和扩展（业务模式扩展）
        2.3 头脑风暴流程上的业务变化的扩展（业务词典）


# DDD战术设计

## 综述
DDD战略设计解决的问题是“如何将领域模型在概念上落地”

DDD战术设计解决的问题是“如何将领域模型在技术上落地”————即领域核心代码应该如何设计和落地的问题。
## 领域核心代码分类
在领域驱动最核心的对象中有以下几类最核心的对象

    事件对象：信息 
    实体对象：信息=>内化为实体 &  处理流程
    值对象 ：变化的抽象
    防腐层对象
    上下文对象：

这5种对象，是从概念角度，但在技术实现，它并不是一个对象（class），而可能是多个。例如

    事件对象：   聚合根 + payload
    实体对象：   实体Entity + 实体Service + 聚合
    值对象：     配置 + （Resolver） +  Engine
    防腐层：    Impl+Adapter
    上下文对象：   
 

而之所以逻辑上称呼他们是一个对象，是因为基于OO的原则，对象是不可变的。即DDD设计中，这五类对象的设计都要保持不可变原则，清晰的区分彼此的职责，清晰的定义彼此的接口。


其中，最复杂的是上下文对象。

上下文对象的一个最复杂的场景是C语言场景全局变量耦合、相互依赖的关系在OO场景下如何实现。

————它实际上就是个缩小了使用范围的反模式实现。————将所有反模式聚焦在一个尽可能小的点（对象内），确保整体架构的清晰。


## 领域驱动实践关键踩点

1，设计层面有没有实现三0三不

2，是否有核心开发角色、核心开发是否负担领域核心构建

3，核心代码是否TDD


[领域驱动案例分享.md](领域驱动案例分享.md)